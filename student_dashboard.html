<!DOCTYPE html>
<html>
<head>
  <title>Student Dashboard</title>
  <style>
    body {
      font-family: Arial;
      padding: 20px;
    }
    .course {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 8px;
    }
    button {
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <h2>ðŸŽ“ Welcome, Student</h2>
  <p id="studentEmail"></p>

  <h3>All Courses:</h3>
  <div id="allCourses"></div>

  <h3>My Enrolled Courses:</h3>
  <ul id="enrolledList"></ul>

  <button onclick="logout()">Logout</button>

  <script>
    const studentEmail = localStorage.getItem("userEmail");
    document.getElementById("studentEmail").textContent = "Logged in as: " + studentEmail;

    const allCoursesDiv = document.getElementById("allCourses");
    const enrolledList = document.getElementById("enrolledList");

    const allCourses = JSON.parse(localStorage.getItem("courses") || "[]");
    const enrolled = JSON.parse(localStorage.getItem("enrolled_" + studentEmail) || "[]");

    function showCourses() {
      allCoursesDiv.innerHTML = "";
      allCourses.forEach((course, index) => {
        const courseDiv = document.createElement("div");
        courseDiv.className = "course";
        courseDiv.innerHTML = `
          <strong>${course.title}</strong><br>${course.description}<br>
          <button onclick="enroll(${index})">Enroll</button>
        `;
        allCoursesDiv.appendChild(courseDiv);
      });
    }

    function showEnrolledCourses() {
      enrolledList.innerHTML = "";
      enrolled.forEach(course => {
        const li = document.createElement("li");
        li.innerHTML = `<strong>${course.title}</strong> - ${course.description}`;
        enrolledList.appendChild(li);
      });
    }

    function enroll(index) {
      const selected = allCourses[index];
      const alreadyEnrolled = enrolled.some(c => c.title === selected.title);
      if (alreadyEnrolled) {
        alert("You are already enrolled in this course.");
        return;
      }
      enrolled.push(selected);
      localStorage.setItem("enrolled_" + studentEmail, JSON.stringify(enrolled));
      showEnrolledCourses();
    }

    function logout() {
      localStorage.clear();
      window.location.href = "login.html";
    }

    showCourses();
    showEnrolledCourses();
  </script>
</body>
</html>
